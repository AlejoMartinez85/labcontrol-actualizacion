<div class="page-body">
  <!--profile cover start-->
  <div class="row">
    <div class="col-lg-12">
      <div class="cover-profile">
        <div class="profile-bg-img">
          <img class="profile-bg-img img-fluid" src="assets/images/user-profile/bg-img1.jpg" alt="bg-img">
          <div class="card-block user-info">
            <div class="col-md-12">
              <div class="media-left">
                <a href="javascript:" class="profile-image">

                  <img style="width: 100px;height: 100px;" class="user-img img-radius"
                    src="{{usuario?.imagen?apiurl+'upload/files_client/'+usuario.imagen:'assets/images/avatar-blank.jpg'}}"
                    alt="user-img">
                </a>

              </div>
              <div class="media-body row">
                <div class="col-lg-12">
                  <div class="user-title">
                    <h2></h2>
                    <span class="text-white"></span>
                  </div>
                </div>
                <div>
                  <div class="pull-right cover-btn">
                    <label class="custom-file btn">

                      <input type="file" ng2FileSelect [uploader]="uploader" class="custom-file-input">
                      <span class="code-header"> <i class="fa fa-upload  fa-2x text-info"></i>
                      </span>

                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-12" *ngIf="uploader.progress>0 ">
              <ngb-progressbar type="primary" height=".3rem" [value]="uploader.progress"></ngb-progressbar>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--profile cover end-->
  <div class="row">
    <div class="col-lg-12">
      <div class="md-tabs md-card-tabs">
        <ngb-tabset>
          <ngb-tab title="Información personal">
            <ng-template ngbTabContent>
              <div [@fadeInOutTranslate] class="m-t-15">
                <!-- personal card start -->
                <div class="card">
                  <div class="card-header">
                    <h5 class="card-header-text">Acerca de mi</h5>
                    <button id="edit-btn" type="button" class="btn btn-sm btn-primary waves-effect waves-light f-right"
                      (click)="toggleEditProfile()">
                      <i class="icofont {{ editProfileIcon }}"></i>
                    </button>
                  </div>
                  <div class="card-body">


                    <div class="view-info" *ngIf="editProfile">
                      <div class="row">
                        <div class="col-lg-12">
                          <div class="general-info">
                            <div class="row">
                              <div class="col-lg-12 col-xl-6">
                                <div class="table-responsive">
                                  <table class="table m-0">
                                    <tbody>
                                      <tr>
                                        <th scope="row">Nombres</th>
                                        <td>{{usuario?.name}}</td>
                                      </tr>
                                      <tr>
                                        <th scope="row">Apellidos</th>
                                        <td>{{usuario?.last_name}}</td>
                                      </tr>
                                      <tr>
                                        <th scope="row">Cargo</th>
                                        <td>{{usuario?.cargo}}</td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                              <!-- end of table col-lg-6 -->
                              <div class="col-lg-12 col-xl-6">
                                <div class="table-responsive">
                                  <table class="table">
                                    <tbody>
                                      <tr>
                                        <th scope="row">Email</th>
                                        <td><a href="javascript:;">{{usuario?.email}}</a></td>
                                      </tr>
                                      <tr>
                                        <th scope="row">Teléfono</th>
                                        <td>{{usuario?.telefono}}</td>
                                      </tr>
                                      <tr>
                                        <th scope="row">Rol</th>
                                        <td>{{Rol?.nombre}}</td>
                                      </tr>

                                    </tbody>
                                  </table>
                                </div>
                              </div>
                              
                              <div class="col-lg-12 col-xl-12">
                               <h4>Firma del usuario</h4>
                                <img *ngIf="usuario.firma"  style="width:400px;height:60px;" [src]="usuario.firma" />
                              </div>
                              <!-- end of table col-lg-6 -->
                            </div>
                            <!-- end of row -->
                          </div>
                          <!-- end of general info -->
                        </div>
                        <!-- end of col-lg-12 -->
                      </div>
                      <!-- end of row -->
                    </div>
                    <!-- end of view-info -->
                    <div class="edit-info" *ngIf="!editProfile">
                      <div class="row">
                        <div class="col-lg-12">
                          <div class="general-info">
                            <div class="row">
                              <div class="col-lg-6">
                                <div class="table-responsive">
                                  <table class="table">
                                    <tbody>
                                      <tr>
                                        <td>
                                          <div class="input-group">
                                            <span class="input-group-prepend"><label class="input-group-text"> <i
                                                  class="icofont icofont-user"></i>Nombres </label></span>
                                            <input type="text" class="form-control" placeholder="Nombres"
                                              [(ngModel)]="usuario.name">
                                          </div>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td>
                                          <div class="input-group">
                                            <span class="input-group-prepend"><label class="input-group-text"> <i
                                                  class="icofont icofont-user"></i> Apellidos</label></span>
                                            <input type="text" class="form-control" placeholder="apellidos"
                                              [(ngModel)]="usuario.last_name">
                                          </div>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td>
                                          <div class="input-group">
                                            <span class="input-group-prepend"><label class="input-group-text"><i
                                                  class="icofont icofont-address-book"></i> Cargo</label></span>
                                            <input type="text" class="form-control" placeholder="cargo"
                                              [(ngModel)]="usuario.cargo">
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                              <!-- end of table col-lg-6 -->
                              <div class="col-lg-6">
                                <div class="table-responsive">
                                  <table class="table">
                                    <tbody>
                                      <tr>
                                        <td>
                                          <div class="input-group">
                                            <span class="input-group-prepend"><label class="input-group-text"><i
                                                  class="icofont icofont-mobile-phone"></i> Email</label></span>
                                            <input type="text" class="form-control" placeholder="telefono"
                                              [(ngModel)]="usuario.telefono">
                                          </div>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td>
                                          <div class="input-group">
                                            <span class="input-group-prepend"><label class="input-group-text"><i
                                                  class="icofont icofont-email"></i> Teléfono</label></span>
                                            <input type="text" class="form-control" placeholder="email"
                                              [(ngModel)]="usuario.email">
                                          </div>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td>
                                          <div class="input-group">
                                            <span class="input-group-prepend"><label class="input-group-text"> <i
                                              class="icofont icofont-user"></i> Rol</label></span>
                                              <select name="" id="" [(ngModel)]="usuario.rol" class="form-control">
                                                <option value="" >Seleccione Rol</option>
                                                <option value="{{rol._id}}" *ngFor="let rol of Roles">{{rol.nombre}}</option>
                                              </select>
                                          </div>
                                        </td>
                                      </tr>

                                    </tbody>
                                  </table>
                                </div>
                              </div>
                              <div class="col-sm-12  text-center">
                                <div class="btn-group btn-group-sm" >
                                  <button *ngIf="usuario.firmaOriginal" class="btn btn-primary waves-effect waves-light m-r-20"
                                  (click)="CropMe()"><span class="icofont icofont-crop"></span></button>
                                  <button *ngIf="usuario.firmaOriginal" class="btn btn-primary waves-effect waves-light m-r-20"
                                  (click)="zoomIn()"><span class="icofont icofont-ui-zoom-in"></span></button>
                                  <button *ngIf="usuario.firmaOriginal" class="btn btn-primary waves-effect waves-light m-r-20"
                                  (click)="zoomOut()"><span class="icofont icofont-ui-zoom-in"></span></button>
                                  <button *ngIf="usuario.firmaOriginal" class="btn btn-primary waves-effect waves-light m-r-20"
                                  (click)="rotate()"><span class="icofont icofont-rotation"></span></button>
                                </div>
                              </div>
                              <div class="col-sm-12 " >
                                <h4>Recortar Firma</h4>
                                <angular-cropper *ngIf="noshow" #angularCropper [cropperOptions]="{ zoomable: true, movable: true, scalable: true }"
                                  (export)="resultImageFun($event)" (ready)="checkstatus($event)" [imageUrl]="imageUrl">
                                </angular-cropper>
                                <label class="custom-file btn">

                                  <input type="file" ng2FileSelect [uploader]="uploaderfirma" class="custom-file-input">
                                  <span class="code-header"> <i class="fa fa-upload  fa-2x text-info"></i>
                                  </span>
                                  <ngb-progressbar type="primary" height=".3rem" [value]="uploaderfirma.progress"></ngb-progressbar><br>
                                </label>
                              </div>
                             
                             
                             
                              <div class="col-lg-12 col-xl-12">
                                <hr>
                                <img *ngIf="usuario.firma"  [style.width.px]="usuario.firmaWidth"   [style.height.px]="usuario.firmaHeight"   [src]="usuario.firma" />
                              </div>
                              <!-- end of table col-lg-6 -->
                            </div>
                            <!-- end of row -->
                            <div class="text-center">
                              <a href="javascript:;" class="btn btn-primary waves-effect waves-light m-r-20"
                                (click)="cactualizarItem()">Actualizar</a>
                              <a href="javascript:;" id="edit-cancel" class="btn btn-default waves-effect"
                                (click)="toggleEditProfile()">Cancelar</a>
                            </div>
                          </div>
                          <!-- end of edit info -->
                        </div>
                        <!-- end of col-lg-12 -->
                      </div>
                      <!-- end of row -->
                    </div>
                    <!-- end of edit-info -->
                  </div>
                  <!-- end of card-body -->
                </div>

                <!-- personal card end-->
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab title="Cambiar Contraseña">
            <ng-template ngbTabContent>
              <div [@fadeInOutTranslate] class="m-t-15">
                <!-- info card start -->
                <div class="card">
                  <div class="card-header">
                    <h5 class="card-header-text">Cambiar Contraseña</h5>
                  </div>
                  <div class="card-body">
                    <form class="md-float-material" (ngSubmit)="cambiarpassword()" [formGroup]="myForm">



                      <div class="row">
                        <div class="input-group">
                          <input type="password" class="form-control" placeholder="Contraseña"
                            formControlName="password" id="password" name="password" [(ngModel)]="newpassword">
                          <span class="md-line"></span><br>
                          <div class="messages text-danger error"
                            *ngIf="myForm.controls.password.errors?.required&& isValidFormSubmitted!=null && !isValidFormSubmitted">
                            Campo
                            Requerido</div>
                        </div>
                        <div class="input-group">
                          <input type="password" class="form-control" placeholder="Confirmar Contraseña"
                            name="rpassword" id="rpassword" formControlName="rpassword">
                          <span class="md-line"></span>
                          <br>

                          <p class="messages text-danger"
                            *ngIf="myForm.controls.rpassword.errors?.required&& isValidFormSubmitted!=null && !isValidFormSubmitted">
                            Campo
                            Requerido</p>

                          <p class="messages text-danger"
                            *ngIf="myForm.controls.rpassword.errors?.equalTo&&myForm.controls.password.touched">&nbsp;
                            El password no coincide.</p>

                        </div>
                        <div class="row m-t-30">
                          <div class="col-md-12">

                            <button type="submit"
                              class="btn btn-primary btn-md btn-block waves-effect text-center m-b-20">Cambiar
                              Contraseña</button>
                          </div>
                        </div>

                      </div>
                    </form>
                  </div>
                </div>
                <!-- info card end -->
              </div>
            </ng-template>
          </ngb-tab>

        </ngb-tabset>
      </div>
    </div>
  </div>
</div>